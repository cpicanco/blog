<!--Copyright (c) 2015-2016 Carlos Rafael Fernandes Picanço.-->
<!DOCTYPE html>
<html lang="pt-BR">


<!-- Head -->
  

  

  

  <head prefix="og: https://ogp.me/ns# fb: https://ogp.me/ns/fb# article: https://ogp.me/ns/article#">
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-59877002-2"></script>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-M3ZGK8V');</script>
    <!-- End Google Tag Manager -->    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Pensamentos sobre com o mínimo de esforço manual, postado por Rafael Picanço, cientista do comportamento, programador entusiasta e baterista freelance.">
  
    <!-- Open Graph meta tags -->
    <meta property="og:title" content="In Flagellis. | Paginação sem plugins usando Jekyll no GitHub Pages">
    <meta property="og:type" content="article">
    <meta property="og:description" content="Pensamentos sobre com o mínimo de esforço manual, postado por Rafael Picanço, cientista do comportamento, programador entusiasta e baterista freelance.">
    <meta property="og:url" content="https://blog.rafael.picanco.nom.br/2015/09/06/paginacao-sem-plugins-usando-jekyll-no-github-pages.html">
    <meta property="og:image" content="https://blog.rafael.picanco.nom.br/media/blog/in-flagellis-clean-pt-br.png">
    <meta property="og:image:width" content="613">
    <meta property="og:image:height" content="448">
  
    <meta property="og:locale" content="pt_BR">
  
    <meta property="og:site_name" content="In Flagellis.">
    <meta property="fb:profile_id" content="1651005333">
    <meta property="fb:app_id" content="179917338701622">

    <!-- Twitter Card properties -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="In Flagellis. | Paginação sem plugins usando Jekyll no GitHub Pages">
    <meta name="twitter:creator" content="@crpicanco">
    <meta name="twitter:description" content="Pensamentos sobre com o mínimo de esforço manual, postado por Rafael Picanço, cientista do comportamento, programador entusiasta e baterista freelance.">
    <meta name="twitter:image" content="https://blog.rafael.picanco.nom.br/media/blog/in-flagellis-clean-pt-br.png">
    <meta name="twitter:image:width" content="613">
    <meta name="twitter:image:height" content="448">
    
    <title>In Flagellis. | Paginação sem plugins usando Jekyll no GitHub Pages</title>

    <link rel="image_src" href="https://blog.rafael.picanco.nom.br/media/blog/in-flagellis-clean-pt-br.png" >
    <link rel="canonical" href="https://blog.rafael.picanco.nom.br/2015/09/06/paginacao-sem-plugins-usando-jekyll-no-github-pages.html">
    <link rel="icon" href="/media/favicon.ico">
    <!-- Bootstrap core CSS -->
    <!-- Custom CSS -->
    <link href="/css/academicons.css" rel="stylesheet">
    <!-- Highlight.js --> 
    <link href="/css/blog-styles.concat.css" rel="stylesheet">
    <!-- Custom Fonts -->   
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
    <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
  </head>



  <body>
   <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M3ZGK8V"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
 
   <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            
              <span class="sr-only">Alternar navegação</span>
            
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>

          </button>
          
            <a class="navbar-brand" href="https://portfolio.rafael.picanco.nom.br/pt-br/projects.html">&middot;&#32;Portfólio</a>
            <a class="navbar-brand" href="https://blog.rafael.picanco.nom.br/pt-br/">&middot;&#32;Blog</a>
            <a class="navbar-brand" href="http://lattes.cnpq.br/9925169248427338">&middot;&#32;Lattes</a>
                  
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
          
            
              
                <li><a href="/2015/09/06/jekyll-pagination-on-github-pages-without-plugins.html">English</a></li> 
              
              <li><a href="/pt-br/about/">Sobre o autor</a></li>           
            
          
          </ul>
        </div>
        <!-- /.navbar-collapse -->
      </div>
      <!-- /.container -->
    </nav>
   
    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
  
    <header class="intro-header" style="background-color:#153038;">
  
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              <h1>Paginação sem plugins usando Jekyll no GitHub Pages</h1>
              <h2 class="subheading">com o mínimo de esforço manual</h2>                                
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Post Content -->
    <article>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <ul class="list-inline">
          
              <li>
                <a href="/pt-br/tags/#web design"><span class="badge">web design</span></a>
              </li>
          
            </ul>   
          </div>
        </div>
        <hr>
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <p>Estou escrevendo em um momento no qual não é possível paginar para múltiplos destinos com o Jekyll ligado no GitHub Pages. O GitHub Pages não permite usar plugins de terceiros nem customizados no Jekyll, pois o Jekyll é executado com a bandeira <code class="language-plaintext highlighter-rouge">--safe</code>. Uma alternativa é utilizar Templates com algum trabalho manual extra. Isso realmente permite a paginação para múltiplos destinos sem qualquer plugins. Estou usando a solução para gerar páginas “on demand” afim de alimentar <a href="http://imakewebthings.com/waypoints/shortcuts/infinite-scroll/">Waypoints - Infinite scroll</a> da página inicial.</p>

<p>Este blog é um exemplo vivo dessa solução, o código fonte está aqui: <a href="https://github.com/cpicanco/cpicanco.github.io">cpicanco.github.io</a>.</p>

<h3 id="desvantagens">Desvantagens</h3>

<ul>
  <li>requer algum trabalho manual (as páginas devem ser criadas manualmente nos destinos).</li>
</ul>

<h3 id="vantagens">Vantagens</h3>

<ul>
  <li>Suporta postagens e coleções (Posts &amp; Collections)</li>
  <li>Suporta customização dos arquivos de entrada</li>
  <li>Suporta customização dos locais de destino</li>
  <li>O trabalho manual pode ser automatizado</li>
</ul>

<h3 id="árvore-de-arquivos">Árvore de arquivos</h3>

<pre><code class="nohighlight">
    - root
    .   /_posts
    .      /2052-01-01-all-posts.md
    .
    .   /_layouts
    .      /InitialPage.html
    .      /Page.html
    .
    .   /man
    .      /page
    .         /1
    .            /index.html
    .         /2
    .            /index.html
    .         /(...)
    .            /index.html
    .
    .      /frontpage
    .         /index.html
    . 
    .   /en
    .      /page
    .         /1
    .            /index.html
    .         /2
    .            /index.html
    .         /(...)
    .            /index.html
    .
    .      /frontpage
    .         /index.html
    . 
    .  index.html
</code></pre>

<p>O arquivo “page/x/index.html” deve ter no mínimo a seguinte variável:
    —
    index: x // onde x corresponde ao número da respectiva página
    —</p>

<h3 id="configuração">Configuração</h3>

<p>É necessário adicionar algumas variáveis no arquivo de configuração <code class="language-plaintext highlighter-rouge">_config.yml</code>. Esta variável controla o número de posts por página:
    mpaginate: 3</p>

<p>Padrões do tipo Scope/Values foram usandos para determinar o caminho de destinho. Também seria possível usar o front matter do arquivos <code class="language-plaintext highlighter-rouge">/page/x/index.html</code>, como você preferir:
    defaults:
      -
        scope:
          path: “en/page”
        values:
          layout: Page
          language: en</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  -
    scope:
      path: "man/page"
    values:
      layout: Page
      language: man
</code></pre></div></div>

<h3 id="templates">Templates</h3>

<p>Como apresentado na árvore de arquivos do site, estou usando dois templates no caminho <code class="language-plaintext highlighter-rouge">_layout/</code>, um para a página inicial e outro para as páginas subsequentes. Para percorrer os post na página inicial você pode fazer:
    {% assign filtered_posts = site.posts | where: ‘language’,page.language %}</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{% for post in filtered_posts limit:site.mpaginate %}
   post.dowhatyouwantbutdontdoitaroundme
{% endfor %}
</code></pre></div></div>

<p>Para percorrer as páginas subsequentes:
    /* Quantas postagens atendem ao critério de filtragem por idioma? */
    {% assign posts_count = site.posts | where: “language”,page.language | size %}</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/* Quantas páginas são necessárias para apresentar todas as postagens? */
{% assign mod_pag = posts_count | modulo:site.mpaginate %}
{% assign pages_count = posts_count | divided_by:site.mpaginate | plus:mod_pag %}

/* Qual deve ser a página seguinte? */
{% assign next_pag = page.index | plus:1 %}

/* É necessário calcular um deslocamento/desvio em relação às postagens de páginas anteriores. */
{% assign OFFSET = site.mpaginate | times:page.index %}

/* Qual deve ser a última página? */
{% if site.mpaginate &lt; pages_count %}
   {% assign last_pag = pages_count | minus:1 %}
{% else %}
   {% assign last_pag = pages_count %}
{% endif %}

{% if OFFSET &gt;= posts_count then %}
   {% assign last_pag = page.index %}
{% endif %}

{% if page.index == last_pag then %}
      {% assign next_pag = 'none' %}
{% endif %}

/* Mostrar os valores das variáveis
Language={{ page.language }}
PostsCount={{ posts_count }}
OFFSET={{ OFFSET }}
PagesCount={{ pages_count }}
NextPage={{ next_pag }}
LastPage={{ last_pag }}
*/

/* Quais posts atendem ao critério de filtragem por idioma? */
{% assign filtered_posts = site.posts | where: 'language',page.language %}

/* Percorrendo os posts */
{% for post in filtered_posts limit:site.mpaginate offset:OFFSET %}
   post.dowhatyouwantbutdontdoitaroundme
{% endfor %}

/* Você pode, se preferir, diferenciar a última página */
{% if page.index == last_pag then %}
   /* I am the last page */
{% else %}
&lt;a class="next-page" href="{{ page.language | downcase }}/page/{{ next_pag }}/"&gt;&lt;/a&gt;
{% endif %}
</code></pre></div></div>

<p>O critério <code class="language-plaintext highlighter-rouge">"language",page.language</code> no filtro <code class="language-plaintext highlighter-rouge">where:</code> popula o vetor de postagens <code class="language-plaintext highlighter-rouge">filtered_posts</code>. Você pode entender esse critério como aquilo que define quais postagens devem ser incluidas nos destinos configurados. Altere esse critério como preferir.</p>

          </div>  
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <p>_</p>
            <!-- Author-Date -->
          
          
            <span class="meta margin-top">&#32;<a href='https://portfolio.rafael.picanco.nom.br/pt-br/projects.html'>Rafael Picanço</a>,&#32;
            6
            &#32;de&#32;
            
            Setembro
              
            &#32;de&#32;
            2015.
            </span>
          
 
            <hr>
            <!-- Social Buttons -->
            <ul class="list-inline">
            
            
              <li>
                <a id="ig-root" href="https://www.instagram.com/orafaprof/">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-instagram fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>            
            
              <li>
                <a id="wz-root" href="https://wa.me/message/EBIXVHNITD5VG1">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-whatsapp fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
                          
              <li>
                <a id="tw-root" href="https://twitter.com/share" class="twitter-share-button" data-url="https://blog.rafael.picanco.nom.br/2015/09/06/paginacao-sem-plugins-usando-jekyll-no-github-pages.html" data-text="Paginação sem plugins usando Jekyll no GitHub Pages, from Rafael Picanço's blog" data-counturl="https://blog.rafael.picanco.nom.br/2015/09/06/paginacao-sem-plugins-usando-jekyll-no-github-pages.html" data-count="horizontal" data-via="crpicanco" title="Tweet">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>

              <li id="fb-root">
                <a id="fb-fa" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.rafael.picanco.nom.br/2015/09/06/paginacao-sem-plugins-usando-jekyll-no-github-pages.html" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=https://blog.rafael.picanco.nom.br/2015/09/06/paginacao-sem-plugins-usando-jekyll-no-github-pages.html', 'facebook-share','width=580,height=296');return false;" title="Compartilhe no Facebook">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-facebook fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
                <a class="fb-like" data-href="https://blog.rafael.picanco.nom.br/2015/09/06/paginacao-sem-plugins-usando-jekyll-no-github-pages.html" data-layout="button_count" data-action="like" data-share="true" data-text="Paginação sem plugins usando Jekyll no GitHub Pages, blog do Rafael Picanço" data-counturl="https://blog.rafael.picanco.nom.br/2015/09/06/paginacao-sem-plugins-usando-jekyll-no-github-pages.html" data-proofer-ignore></a>
              </li>
            </ul>

            <hr>
            <div class="text-center">         
            
              <a class="btn btn-default btn-block" href="/pt-br/">LEIA MAIS</a>
            
            </div>
          </div>
        </div>          
      </div>
    </article>
    
    <hr>

    <div id="disqus_thread" class="container"></div>

    <!-- Footer -->
    <footer id="about">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <ul class="list-inline text-center">
              <li>
                <a href="https://twitter.com/crpicanco">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://soundcloud.com/carlitusbatera">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-soundcloud fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/cpicanco">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
            </ul>
            <p class="text-muted text-center">
              &copy; 2015-2021 Carlos Rafael Fernandes Picanço.<br>
            
              Hospedado pelo <a href="https://github.com/cpicanco/blog/">GitHub Pages</a>.<br>
              Construído com o <a href="https://github.com/features/actions">GitHub Actions</a>, o <a href="https://getbootstrap.com/">Bootstrap</a> e o <a href="https://jekyllrb.com/">Jekyll</a>.<br>
            
            </p>
          </div>
        </div>
      </div>
    </footer>


    <!-- JQuery may conflict with Bootstrap, they said -->        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
        <script>
          if (typeof jQuery === 'undefined') {
            document.write(unescape('%3Cscript%20src%3D%22/js/jquery.min.js%22%3E%3C/script%3E'));
          };
        </script>
      <!-- Bootstrap core JavaScript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster 
        http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/
        http://stackoverflow.com/questions/26192897/should-i-use-bootstrap-from-cdn-or-make-a-copy-on-my-server
      -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
        <script>
          if (typeof($.fn.modal) === 'undefined') {
            document.write(unescape('%3Cscript%20src%3D%22/js/bootstrap.min.js%22%3E%3C/script%3E'));
          };
        </script>

        <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
        <script src="/js/ie10-viewport-bug-workaround.min.js"></script>

        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'UA-59877002-2');
        </script>


        <!-- Google Knowledge Graph -->
    
    
        <script type="application/ld+json">
        {
          "@context": "http://schema.org",
          "@type": "Article",
          "author": "Rafael Picanço",
          "name": "Paginação sem plugins usando Jekyll no GitHub Pages",
          "articleSection": "web design",
          "datePublished": "2015-09-06",
          "headline": "com o mínimo de esforço manual",
          
          "image": "https://blog.rafael.picanco.nom.br/media/blog/in-flagellis-clean.png"
          
        }
        </script>
    

    <!-- Lazy load -->
        <!-- Twitter JavaScript
        http://www.paulund.co.uk/lazy-load-social-media
        -->
        <script type="text/javascript">
          var tweetHover = function(e){
            $(e).hover(
              function(){ // mouse enter
                if ($(this).hasClass("share-enabled")) {
                  // do nothing
                } else {
                  if (typeof (twttr) != 'undefined'){ // will load just the entered #tw-root
                    twttr.widgets.load(this);
                    $(this).addClass("share-enabled");
                  } else {  // will load all #tw-root, and it sucks
                    $.getScript('https://platform.twitter.com/widgets.js');
                    $(this).addClass("share-enabled");
                  }
                }
              },
              function(){ // mouse leave

              }
            );           
          };
          $(document).ready(function(){
            tweetHover("#tw-root");
          });
        </script>
        
        <!-- Facebook JavaScript
        https://developers.facebook.com/docs/javascript/howto/jquery/v2.4
        -->
        <script type="text/javascript">
          var facebook_sdk = '//connect.facebook.net/en_US/sdk.js';
          if (document.documentElement.lang = 'pt-BR') {
            facebook_sdk = '//connect.facebook.net/pt_BR/sdk.js';
          };
          
          var facebookHover = function(e){
            $(e).hover(
              function(){ // mouse enter
                if ($(this).hasClass("share-enabled")) {
                  // do nothing
                } else {
                  if (typeof (FB) != 'undefined') { // will load just the entered #fb-root
                    FB.XFBML.parse(this); 
                    $(this).addClass("share-enabled");
                    $(this).find("#fb-fa").remove();
                  } else { // will load all #fb-root, and it sucks too
                    $.getScript(facebook_sdk, function(){
                      FB.init({
                        appId   : '179917338701622',
                        xfbml   : true,
                        version : 'v2.4'
                      });
                    });
                    $(this).addClass("share-enabled");
                    $(document).find("[id=fb-fa]").each(function(){$(this).remove()});
                  }
                }
              },
              function(){ // mouse leave
                //
              }
            );
          };
          $(document).ready(function(){
            facebookHover("#fb-root");
          });
        </script>

    <!-- Highlight.js -->
  <script src="/js/highlight-pack.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
        <!-- Disqus scripts -->
    <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES * * */
      var dlanguage = 'en';
      if (document.documentElement.lang = 'pt-BR') {
        dlanguage = 'pt';
      };
      var disqus_shortname = 'inflagellis';
      var disqus_url = 'https://blog.rafael.picanco.nom.br/2015/09/06/paginacao-sem-plugins-usando-jekyll-no-github-pages.html';
      var disqus_identifier = '/2015/09/06/paginacao-sem-plugins-usando-jekyll-no-github-pages';
      var disqus_config = function () {
                            this.language = dlanguage;
                          };

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();

      /* * * Disqus Reset Function * * */
      function resetDisqus(newIdentifier, newUrl, newTitle, newLanguage) {
        DISQUS.reset({
          reload: true,
          config: function () {
            this.page.identifier = newIdentifier;
            this.page.url = newUrl;
            this.page.title = newTitle;
            this.language = newLanguage;
          }
        });
      };
    </script>

    <!-- Custom Theme JavaScript -->
    <script src="/js/clean-blog.min.js"></script> 
  </body>
</html>
